{% extends 'base.html' %}
{% load static %}

{% block title %}Đặt lịch khám - MediBook{% endblock %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/appointment.css' %}" />

<nav class="ym-breadcrumb">
    <a href="/">Trang chủ</a>
    <span>/</span>
    <a href="#">Đặt lịch khám</a>
</nav>

<section class="doc-profile container">
    <!-- Header bác sĩ -->
    <div class="card doc-header">
        <div class="doc-avatar">
            <img src="{{ doctor.profile_picture|default:'https://via.placeholder.com/160' }}" alt="Ảnh bác sĩ" />
        </div>

        <div class="doc-meta">
            <h1 class="doc-name">
                Tiến sĩ, Bác sĩ {{ doctor.user.full_name|default:'Nguyễn Đình Khánh' }}
                <span class="verified" title="Đã xác thực">
                    <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M12 2l2.4 3.8 4.4 1-2.9 3.4.5 4.6-4-1.8-4 1.8.5-4.6L5.2 6.8l4.4-1L12 2z"></path>
                    </svg>
                </span>
            </h1>

            <div class="doc-row">
                <span class="chip chip-role">Bác sĩ</span>
                <span class="muted"><strong>{{ doctor.experience_years|default:10 }}</strong> năm kinh nghiệm</span>
            </div>

            <div class="doc-row">
                <div class="field">
                    <span class="label">Chuyên khoa</span>
                    <span class="value">{{ doctor.specialty.name|default:'Nội thần kinh' }}</span>
                </div>
            </div>

           
        </div>

        <div class="doc-actions">
            <button class="btn btn-ghost" id="btn-fav" aria-pressed="false"><span class="icon-heart" aria-hidden="true"></span> Yêu thích</button>
        </div>
    </div>

    <!-- Lưu ý -->
    <div class="card notice">
        <h3 class="notice-title">⚠️ Lưu ý</h3>
        <ul class="notice-list">
            <li>{{ doctor.notice|default:"Phòng khám thường đông; vui lòng đặt sớm để giữ lịch." }}</li>
            <li>Ưu tiên người bệnh nặng, già yếu, đi lại khó khăn.</li>
        </ul>
    </div>

    <!-- Đặt khám nhanh -->
    <div class="card quick">
        <h3 class="section-title">Đặt khám nhanh</h3>

        <div class="scroller">
            <button class="nav prev" aria-label="Trước">&lsaquo;</button>
            <div class="dates" id="date-track">
                <div class="date-pill disabled">
                    <div class="d-label">Th 6, 05-09</div>
                    <div class="d-sub">Đã đầy lịch</div>
                </div>
                <div class="date-pill disabled">
                    <div class="d-label">Th 7, 06-09</div>
                    <div class="d-sub">Đã đầy lịch</div>
                </div>
            </div>
            <button class="nav next" aria-label="Sau">&rsaquo;</button>
        </div>

        <div class="slot-session">
            <div class="session-title">🌤️ Buổi chiều</div>
            <div class="slots">
                <button class="slot">19:30–19:45</button>
                <button class="slot">19:45–20:00</button>
            </div>
        </div>
    </div>

    <!-- Giới thiệu -->
    <div class="card about">
        <h3 class="section-title">Giới thiệu</h3>
        <div class="readmore" data-max="4">
            <p>{{ doctor.bio|default:"Bác sĩ chưa cập nhật tiểu sử" }}</p>
        </div>
        <button class="btn btn-link" id="btn-readmore">…Xem thêm</button>
    </div>

    <!-- Địa chỉ & Hình ảnh -->
    <div class="grid-2">
        <div class="card">
            <h3 class="section-title">Địa chỉ</h3>
            <p>{{ doctor.full_address|default:"Số 01, Đường Ví Dụ, Quận 1, TP.HCM" }}</p>
            <p><strong>Giờ khám:</strong> 18:30 – 20:30 (T2–T6)</p>
            <p><strong>Liên hệ:</strong> 1900-2805</p>
        </div>
        <div class="card">
            <h3 class="section-title">Hình ảnh</h3>
            <div class="gallery">
                <div class="gallery-empty">Chưa có hình. Thêm ảnh sau bằng đường dẫn trực tiếp.</div>
            </div>
        </div>
    </div>

    <!-- Học vấn -->
    <div class="card">
        <h3 class="section-title">kinh nghiệm </h3>
        <ul class="bullet">
            <li>2007–2015: Tiến sĩ chuyên ngành Thần kinh, ĐH Y Dược TP.HCM.</li>
            <li>2003–2006: Thạc sĩ chuyên ngành Thần kinh, ĐH Y Dược TP.HCM.</li>
        </ul>
    </div>

    <!-- Kinh nghiệm -->
    <div class="card">
        <h3 class="section-title">Kinh nghiệm</h3>
        <ul class="bullet">
            <li>Giảng viên bộ môn Thần Kinh, ĐH Y Dược TP.HCM.</li>
        </ul>
    </div>
</section>

<!-- Thanh gọi hành động dưới cùng -->
<div class="sticky-cta">
    <div class="hotline">Hỗ trợ đặt khám <strong>1900-2805</strong></div>
    
    <a href="{% url 'appointments:appointment' %}" class="btn btn-primary">
        ĐẶT KHÁM NGAY
    </a>
</div>
<script src="{% static 'js/appointment.js' %}"></script>
{% endblock %}
