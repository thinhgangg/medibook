{% extends "base.html" %} {% load static %} {% block content %}

<link rel="stylesheet" href="{% static 'css/login.css' %}?v=7" />

<div class="auth-container">
    <div class="form-container">
        <div class="tabs">
            <div class="tab active">Quên mật khẩu</div>
        </div>
        <!-- Forgot Password form -->
        <div id="forgot-password" class="tab-content">
            <form id="forgot-password-form">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" placeholder="Nhập email của bạn" required class="input-field" data-validate="email" />
                    <span class="error" id="reg-email-error"></span>
                </div>
                <button type="button" id="send-otp" class="btn-submit" disabled>Gửi OTP</button>
                <div class="divider-with-text">
                    <span class="divider-text">
                        Đã có tài khoản?
                        <a href="{% url 'accounts:login' %}?action=login" class="link">Đăng nhập</a>
                    </span>
                </div>
            </form>
        </div>
    </div>

    <div class="forgot-password-flow hidden">
        <div class="container">
            <div class="steps">
                <div class="step active" data-step="1">1. Xác thực</div>
                <div class="step" data-step="2">2. Mật khẩu</div>
            </div>

            <!-- Step 1: OTP -->
            <div id="otp-section" class="step-content" data-step="1">
                <p class="otp-info">Nhập mã OTP vừa được gửi đến <span id="user-email"></span></p>
                <div class="otp-input">
                    <input type="text" name="otp" maxlength="6" placeholder="Nhập mã OTP" class="input-field" data-validate="otp" />
                    <span class="error" id="otp-error"></span>
                </div>
                <button type="button" id="verify-otp" class="btn-primary">Tiếp tục</button>
                <p class="resend">
                    Không nhận được mã OTP? <br />
                    <a href="#" id="resend-otp">Thử lại</a>
                    <span id="countdown"></span>
                </p>
            </div>

            <!-- Step 2: Password -->
            <div id="password-section" class="step-content hidden" data-step="2">
                <form id="password-form">
                    <div class="form-group">
                        <label>Mật khẩu</label>
                        <input type="password" name="password" placeholder="Nhập mật khẩu" required class="input-field" data-validate="password" />
                        <span class="error" id="pass-error"></span>
                    </div>
                    <div class="form-group">
                        <label>Xác nhận mật khẩu</label>
                        <input
                            type="password"
                            name="confirm_password"
                            placeholder="Xác nhận mật khẩu"
                            required
                            class="input-field"
                            data-validate="confirm-password"
                        />
                        <span class="error" id="confirm-pass-error"></span>
                    </div>
                    <button type="button" id="set-password" class="btn-primary">Tiếp tục</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="{% static 'js/forgot-password.js' %}"></script>
<script src="{% static 'js/form-validation.js' %}"></script>
{% endblock content %}
